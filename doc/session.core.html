<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>session.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Session</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>session</span></div></div></li><li class="depth-2 branch current"><a href="session.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2"><a href="session.memory.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>memory</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="session.core.html#var-alive.3F"><div class="inner"><span>alive?</span></div></a></li><li class="depth-1"><a href="session.core.html#var-dispose.21"><div class="inner"><span>dispose!</span></div></a></li><li class="depth-1"><a href="session.core.html#var-expired.3F"><div class="inner"><span>expired?</span></div></a></li><li class="depth-1"><a href="session.core.html#var-keep-alive"><div class="inner"><span>keep-alive</span></div></a></li><li class="depth-1"><a href="session.core.html#var-keep-alive.21"><div class="inner"><span>keep-alive!</span></div></a></li><li class="depth-1"><a href="session.core.html#var-make-id"><div class="inner"><span>make-id</span></div></a></li><li class="depth-1"><a href="session.core.html#var-make-state"><div class="inner"><span>make-state</span></div></a></li><li class="depth-1"><a href="session.core.html#var-maximum-lifetime"><div class="inner"><span>maximum-lifetime</span></div></a></li><li class="depth-1"><a href="session.core.html#var-merge.21"><div class="inner"><span>merge!</span></div></a></li><li class="depth-1"><a href="session.core.html#var-minimum-lifetime"><div class="inner"><span>minimum-lifetime</span></div></a></li><li class="depth-1"><a href="session.core.html#var-MutableSessionContainer"><div class="inner"><span>MutableSessionContainer</span></div></a></li><li class="depth-2 branch"><a href="session.core.html#var--dispose.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-dispose!</span></div></a></li><li class="depth-2 branch"><a href="session.core.html#var--keep-alive.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-keep-alive!</span></div></a></li><li class="depth-2 branch"><a href="session.core.html#var--merge.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-merge!</span></div></a></li><li class="depth-2 branch"><a href="session.core.html#var--new-session.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-new-session!</span></div></a></li><li class="depth-2 branch"><a href="session.core.html#var--remove-expired-sessions.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-remove-expired-sessions!</span></div></a></li><li class="depth-2 branch"><a href="session.core.html#var--remove-keys.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-remove-keys!</span></div></a></li><li class="depth-2 branch"><a href="session.core.html#var--remove-session.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-remove-session!</span></div></a></li><li class="depth-2 branch"><a href="session.core.html#var--subscribe.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-subscribe!</span></div></a></li><li class="depth-2 branch"><a href="session.core.html#var--transduce"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-transduce</span></div></a></li><li class="depth-2"><a href="session.core.html#var--unsubscribe.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>-unsubscribe!</span></div></a></li><li class="depth-1"><a href="session.core.html#var-new-session.21"><div class="inner"><span>new-session!</span></div></a></li><li class="depth-1"><a href="session.core.html#var-now"><div class="inner"><span>now</span></div></a></li><li class="depth-1"><a href="session.core.html#var-remove-expired-sessions.21"><div class="inner"><span>remove-expired-sessions!</span></div></a></li><li class="depth-1"><a href="session.core.html#var-remove-keys.21"><div class="inner"><span>remove-keys!</span></div></a></li><li class="depth-1"><a href="session.core.html#var-remove-session.21"><div class="inner"><span>remove-session!</span></div></a></li><li class="depth-1"><a href="session.core.html#var-start-session-cleaner"><div class="inner"><span>start-session-cleaner</span></div></a></li><li class="depth-1"><a href="session.core.html#var-subscribe.21"><div class="inner"><span>subscribe!</span></div></a></li><li class="depth-1"><a href="session.core.html#var-time-to-live"><div class="inner"><span>time-to-live</span></div></a></li><li class="depth-1"><a href="session.core.html#var-transduce"><div class="inner"><span>transduce</span></div></a></li><li class="depth-1"><a href="session.core.html#var-unsubscribe.21"><div class="inner"><span>unsubscribe!</span></div></a></li><li class="depth-1"><a href="session.core.html#var-with-state-.3E"><div class="inner"><span>with-state-&gt;</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">session.core</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-alive.3F"><h3>alive?</h3><div class="usage"><code>(alive? state)</code></div><div class="doc"><pre class="plaintext">Tests if session state is not expired.
</pre></div></div><div class="public anchor" id="var-dispose.21"><h3>dispose!</h3><div class="usage"><code>(dispose! container)</code></div><div class="doc"><pre class="plaintext">Releases resources and stops asynchronous tasks.
</pre></div></div><div class="public anchor" id="var-expired.3F"><h3>expired?</h3><div class="usage"><code>(expired? state)</code></div><div class="doc"><pre class="plaintext">Tests if session state is expired.
</pre></div></div><div class="public anchor" id="var-keep-alive"><h3>keep-alive</h3><div class="usage"><code>(keep-alive state)</code></div><div class="doc"><pre class="plaintext">Updates access time.
</pre></div></div><div class="public anchor" id="var-keep-alive.21"><h3>keep-alive!</h3><div class="usage"><code>(keep-alive! container id)</code></div><div class="doc"><pre class="plaintext">Tests is unexpired session with associated `id` exists.
If true, last access time is updated. Returns new state or nil.</pre></div></div><div class="public anchor" id="var-make-id"><h3>make-id</h3><div class="usage"><code>(make-id)</code></div><div class="doc"><pre class="plaintext">Generates a unique session id.
</pre></div></div><div class="public anchor" id="var-make-state"><h3>make-state</h3><div class="usage"><code>(make-state lifetime)</code></div><div class="doc"><pre class="plaintext">Creates new session state expiring in `lifetime` milliseconds.
</pre></div></div><div class="public anchor" id="var-maximum-lifetime"><h3>maximum-lifetime</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Maximum session lifetime in milliseconds.
</pre></div></div><div class="public anchor" id="var-merge.21"><h3>merge!</h3><div class="usage"><code>(merge! container id m)</code></div><div class="doc"><pre class="plaintext">Tests if unexpired session with associated `id` exists.
If true, session state is
merged with m and last access time is updated. Returns new state or nil.</pre></div></div><div class="public anchor" id="var-minimum-lifetime"><h3>minimum-lifetime</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Minimum session lifetime in milliseconds.
</pre></div></div><div class="public anchor" id="var-MutableSessionContainer"><h3>MutableSessionContainer</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Mutable container for sessions.
</pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--dispose.21"><h3>-dispose!</h3><div class="usage"><code>(-dispose! this)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var--keep-alive.21"><h3>-keep-alive!</h3><div class="usage"><code>(-keep-alive! this id)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var--merge.21"><h3>-merge!</h3><div class="usage"><code>(-merge! this id m)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var--new-session.21"><h3>-new-session!</h3><div class="usage"><code>(-new-session! this lifetime)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var--remove-expired-sessions.21"><h3>-remove-expired-sessions!</h3><div class="usage"><code>(-remove-expired-sessions! this)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var--remove-keys.21"><h3>-remove-keys!</h3><div class="usage"><code>(-remove-keys! this id keys)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var--remove-session.21"><h3>-remove-session!</h3><div class="usage"><code>(-remove-session! this id)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var--subscribe.21"><h3>-subscribe!</h3><div class="usage"><code>(-subscribe! this event ch)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var--transduce"><h3>-transduce</h3><div class="usage"><code>(-transduce this xform f init)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var--unsubscribe.21"><h3>-unsubscribe!</h3><div class="usage"><code>(-unsubscribe! this event ch)</code></div><div class="doc"><pre class="plaintext"></pre></div></div></div></div></div><div class="public anchor" id="var-new-session.21"><h3>new-session!</h3><div class="usage"><code>(new-session! container lifetime)</code></div><div class="doc"><pre class="plaintext">Creates a session.
Returns new map containing session id and state.</pre></div></div><div class="public anchor" id="var-now"><h3>now</h3><div class="usage"><code>(now)</code></div><div class="doc"><pre class="plaintext">Returns Unix time in milliseconds (UTC).
</pre></div></div><div class="public anchor" id="var-remove-expired-sessions.21"><h3>remove-expired-sessions!</h3><div class="usage"><code>(remove-expired-sessions! container)</code></div><div class="doc"><pre class="plaintext">Removes and returns expired sessions from `container`.
</pre></div></div><div class="public anchor" id="var-remove-keys.21"><h3>remove-keys!</h3><div class="usage"><code>(remove-keys! container id keys)</code></div><div class="doc"><pre class="plaintext">Tests if unexpired session with associated `id` exists.
If true, keys are removed from session state and last access time is updated.
Returns new state or nil.</pre></div></div><div class="public anchor" id="var-remove-session.21"><h3>remove-session!</h3><div class="usage"><code>(remove-session! container id)</code></div><div class="doc"><pre class="plaintext">Tests if unexpired session with associated `id` exists.
If true, removes session and returns its state.</pre></div></div><div class="public anchor" id="var-start-session-cleaner"><h3>start-session-cleaner</h3><div class="usage"><code>(start-session-cleaner container)</code></div><div class="doc"><pre class="plaintext">Starts a thread calling `session.core/remove-expired-sessions!`
automatically. Exits when `container` disposes.</pre></div></div><div class="public anchor" id="var-subscribe.21"><h3>subscribe!</h3><div class="usage"><code>(subscribe! container event ch)</code></div><div class="doc"><pre class="plaintext">Subscribes `ch` to an `event`
</pre></div></div><div class="public anchor" id="var-time-to-live"><h3>time-to-live</h3><div class="usage"><code>(time-to-live state date)</code><code>(time-to-live state)</code></div><div class="doc"><pre class="plaintext">Milliseconds until `state` expires.
Compares end-of life-to `session.core/now` if `date` is not specified.</pre></div></div><div class="public anchor" id="var-transduce"><h3>transduce</h3><div class="usage"><code>(transduce xform f init container)</code></div><div class="doc"><pre class="plaintext">Reduces unexpired session states with a transformation of (xform f).
</pre></div></div><div class="public anchor" id="var-unsubscribe.21"><h3>unsubscribe!</h3><div class="usage"><code>(unsubscribe! container event ch)</code></div><div class="doc"><pre class="plaintext">Unsubscribes `ch` from an `event`
</pre></div></div><div class="public anchor" id="var-with-state-.3E"><h3>with-state-&gt;</h3><h4 class="type">macro</h4><div class="usage"><code>(with-state-&gt; state &amp; forms)</code></div><div class="doc"><pre class="plaintext">Tests if `state`is unexpired.
If true, state is threaded trough the `forms`. Returns result or nil.</pre></div></div></div></body></html>